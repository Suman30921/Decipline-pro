<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Discipline Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  padding:16px;
  font-family: "Segoe UI", Arial, sans-serif;
  background: linear-gradient(180deg,#020617,#0f172a);
  color:#e5e7eb;
}

.app{max-width:480px;margin:auto;}

h1{text-align:center;margin:6px 0;}
.day{text-align:center;font-size:14px;color:#94a3b8;margin-bottom:14px;}

.top{
  background:#020617;
  padding:14px;
  border-radius:14px;
  box-shadow:0 8px 25px rgba(0,0,0,.5);
}

input[type="date"]{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:none;
  font-size:15px;
}

.score{
  text-align:center;
  font-size:26px;
  font-weight:bold;
  margin-top:8px;
  animation:count .6s ease;
}

.status{text-align:center;margin-bottom:10px;}

.card{
  background:#1e293b;
  border-radius:14px;
  padding:12px;
  margin:10px 0;
  display:flex;
  justify-content:space-between;
  align-items:center;
  animation:slideIn .4s ease;
  transition:.3s;
}

.card.done{box-shadow:0 0 16px rgba(34,197,94,.6);}
.card.fail{box-shadow:0 0 16px rgba(239,68,68,.6);}

.habit.done{color:#22c55e;}
.habit.fail{color:#ef4444;}

.actions button{
  border:none;
  padding:6px 10px;
  margin-left:6px;
  border-radius:8px;
  font-size:18px;
  cursor:pointer;
  transition:.2s;
}

.actions button:active{transform:scale(.85);}

.ok{background:rgba(34,197,94,.15);color:#22c55e;}
.bad{background:rgba(239,68,68,.15);color:#ef4444;}

.week{
  margin-top:20px;
  background:#020617;
  padding:14px;
  border-radius:14px;
}

.week h3{text-align:center;margin-bottom:10px;}

.bar{
  background:#1e293b;
  border-radius:10px;
  margin:8px 0;
  overflow:hidden;
}

.fill{
  height:28px;
  line-height:28px;
  padding-left:10px;
  background:linear-gradient(90deg,#22c55e,#16a34a);
  width:0;
  animation:grow 1s forwards;
}

@keyframes slideIn{
  from{opacity:0;transform:translateY(10px);}
  to{opacity:1;transform:none;}
}
@keyframes grow{
  from{width:0;}
}
</style>
</head>

<body>
<div class="app">

<h1>Discipline Pro</h1>
<div class="day" id="dayName"></div>

<div class="top">
  <input type="date" id="datePicker">
  <div class="score" id="score">0%</div>
  <div class="status" id="status"></div>
</div>

<div id="habitList"></div>

<div class="week">
  <h3>ðŸ“Š Last 7 Days</h3>
  <div id="weekData"></div>
</div>

</div>

<script>
var habits=[
"Sleep 6h","Eat healthy","Drink proper water","No time waste",
"No bad friends","No social media","No new g","Only miss h",
"No p","Don't get angry","Smile less"
];

var list=document.getElementById("habitList");
var picker=document.getElementById("datePicker");
var scoreEl=document.getElementById("score");
var statusEl=document.getElementById("status");
var dayEl=document.getElementById("dayName");
var weekBox=document.getElementById("weekData");

function iso(d){return d.toISOString().split("T")[0];}
function dayName(d){return new Date(d).toLocaleDateString(undefined,{weekday:"long"});}

function load(date){
  list.innerHTML="";
  var key="discipline_"+date;
  var data=JSON.parse(localStorage.getItem(key)||"{}");
  var done=0;

  habits.forEach(h=>{
    var c=document.createElement("div");c.className="card";
    var n=document.createElement("div");n.textContent=h;
    var a=document.createElement("div");a.className="actions";

    var ok=document.createElement("button");ok.textContent="âœ”";ok.className="ok";
    ok.onclick=()=>save(date,h,"âœ”");

    var bad=document.createElement("button");bad.textContent="âœ˜";bad.className="bad";
    bad.onclick=()=>save(date,h,"âœ˜");

    if(data[h]==="âœ”"){n.className="habit done";c.classList.add("done");done++;}
    if(data[h]==="âœ˜"){n.className="habit fail";c.classList.add("fail");}

    a.append(ok,bad);c.append(n,a);list.append(c);
  });

  var p=Math.round(done/habits.length*100);
  scoreEl.textContent=p+"%";
  statusEl.textContent=p>=80?"ðŸ”¥ Very Good":p>=50?"ðŸ™‚ Good":"âš  Needs Improvement";
  loadWeek();
}

function save(date,h,v){
  var key="discipline_"+date;
  var d=JSON.parse(localStorage.getItem(key)||"{}");
  d[h]=v;
  localStorage.setItem(key,JSON.stringify(d));
  load(date);
}

function loadWeek(){
  weekBox.innerHTML="";
  for(let i=6;i>=0;i--){
    let d=new Date();d.setDate(d.getDate()-i);
    let k="discipline_"+iso(d);
    let data=JSON.parse(localStorage.getItem(k)||"{}");
    let done=Object.values(data).filter(v=>v==="âœ”").length;
    let p=Math.round(done/habits.length*100);

    let bar=document.createElement("div");bar.className="bar";
    let fill=document.createElement("div");fill.className="fill";
    fill.style.width=p+"%";
    fill.textContent=iso(d)+" â€“ "+p+"%";
    bar.append(fill);weekBox.append(bar);
  }
}

var today=new Date();
picker.value=iso(today);
dayEl.textContent=dayName(today);
load(iso(today));

picker.onchange=()=>{dayEl.textContent=dayName(picker.value);load(picker.value);}
</script>

</body>
</html>
